## 技术敏感度

当前用的.NET哪个版本

.NET最新版本是哪个

C#语言发展到哪个版本了

C#最新版本特性有哪些

接触过哪些开源项目

## 基础

### 继承

#### .NET中子类可以继承父类中的哪些成员？

[Inheritance - derive types to create more specialized behavior](https://docs.microsoft.com/en-us/dotnet/csharp/fundamentals/object-oriented/inheritance)

![inheritance](imgs/inheritance.jpg)

#### 对象实例化机制

抽象类是否可以被实例化？是否可以有实例构造函数？不能实例化为什么要有实例构造函数？



#### 重写

##### 语法规范

方法签名不能变更

[Beginning with C# 9.0, read-only overriding properties support covariant return types.](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/override)

针对protected internal的方法进行跨程序集override时，访问修饰符需变更为protected，参考示例重写EF Core中DbContext的OnModelCreating或OnConfiguring方法。参考文档：[Override methods](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/language-specification/classes#override-methods)

##### new 和 override的区别

override只能用于virtual或者override成员

可使用sealed进制子类再override

new 可以是任意成员

参考：[Knowing When to Use Override and New Keywords (C# Programming Guide)](https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/classes-and-structs/knowing-when-to-use-override-and-new-keywords)

## 进阶

### GC

有哪几种模式？workstation vs. server GC

Background vs Concurrent GC

参考：[Fundamentals of garbage collection](https://docs.microsoft.com/en-us/dotnet/standard/garbage-collection/fundamentals)

运行时如何配置，[Run-time configuration options for garbage collection](https://docs.microsoft.com/en-us/dotnet/core/run-time-config/garbage-collector)

### 异步

问：async void和async Task/async Task<T>的区别？

答：

### 多线程

问：.NET中线程有哪几种状态？状态间如何转换？

答：

阻塞、等待、挂起什么区别？这三种状态下的线程是否还能被用于执行其他任务？对线程池的影响？

block vs waiting

[漫话：如何给女朋友解释为什么Java线程没有Running状态？](https://mp.weixin.qq.com/s/Vr5E68TEcU2tu7-5K03MBA)

![](imgs/jvm线程状态.jpg)

### 线程安全

.NET provides a range of types that you can use to synchronize access to a shared resource or coordinate thread interaction: [Overview of synchronization primitives](https://docs.microsoft.com/en-us/dotnet/standard/threading/overview-of-synchronization-primitives)



#### ThreadStatic vs ThreadLocal vs AsyncLocal

#### lock/Monitor vs SemaphoreSlim vs WaitHandle

![Semaphore & Lock & Mutex](imgs/Semaphore & Lock & Mutex.jpg)



问：lock语句中能不能使用await？若不能，为什么？

答：哪个线程使用lock加锁，就要有哪个线程负责释放。await/Task默认的调度机制是线程池，会有线程的切换，有可能导致锁无法释放。

```c#
class Program
{
    private static readonly object _obj = new object();

    static async Task Main(string[] args)
    {
        await LockAsync();
        Console.ReadKey();
    }
    
    static async Task LockAsync()
    {
        lock (_obj)
        {
            Console.WriteLine("lock");
            // Error CS1996: Cannot await in the body of a lock statement
            await Task.CompletedTask;
        }
    }
}
```





#### 可重入锁





#### 并发集合

[System.Collections.Concurrent Namespace](https://docs.microsoft.com/en-us/dotnet/api/system.collections.concurrent?view=net-5.0)



### 性能与问题排查

#### 性能

性能问题分析通用套路
有哪些工具

#### 问题排查
dump文件


## 框架



### EF Core

#### DbContext



#### Model Configure



#### Migrations



#### CRUD



#### Change Tracking

[Change Tracking in EF Core](https://docs.microsoft.com/en-us/ef/core/change-tracking/)

Identity Resolution

问：Entity有几种状态？如何追踪Entity状态变化？

[Accessing Tracked Entities](https://docs.microsoft.com/en-us/ef/core/change-tracking/entity-entries)

#### 事务



#### 内部原理



### ASP.NET Core

#### 配置读取

问：ASP.NET Core中如何读取配置信息？

答：ASP.NET Core中配置信息的读取可使用IConfiguration接口，或者Options Pattern。Options Pattern提供了三个接口如下：

+ IOptions<TOptions>，生命周期是Singleton，应用启动后，无法感知配置信息的变化
+ IOptionsSnapshot<TOptions>，生命周期是Scope，每次使用时重新计算配置信息
+ IOptionsMonitor<TOptions>，生命周期是Singleton，可感知配置信息的变化

要告知配置信息的变化，在构建Host时要指定配置文件发生变化时重新加载配置文件：

```c#
public class Program
{
    public static void Main(string[] args)
    {
        new HostBuilder()
            .UseContentRoot(Directory.GetCurrentDirectory())
            .ConfigureAppConfiguration((hostBuilderContext, cfgBuilder) =>
            {
                // reloadOnChange参数设为true
                cfgBuilder.AddJsonFile("appsettings.json", false, true);
                cfgBuilder.AddJsonFile($"appsettings.{hostBuilderContext.HostingEnvironment.EnvironmentName}.json", false, true);
            })
            .ConfigureLogging(logBuilder =>
            {
                logBuilder.AddConsole();
                logBuilder.SetMinimumLevel(LogLevel.Information);
            })
            .ConfigureWebHostDefaults(hostBuilder =>
            {
                hostBuilder.UseStartup<Startup>();
            })
            .Build()
            .Run();
    }
}
```




>  IConfigureOptions<TOptions> vs IPostConfigureOptions<TOptions>


#### 环境变量



#### Middleware



#### 认证授权

Open Id/OAuth

JWT

ClaimIdentity



#### 打包发布



## 数据库



## Linux

参考《开发人员Linux面试》